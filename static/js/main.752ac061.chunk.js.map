{"version":3,"sources":["panels/History.js","panels/Frame.js","App.js","index.js"],"names":["History","id","setActivePanel","setCurentLink","data","setData","size","map","item","subtitle","company","header","name","caption","work","image","img","onClick","code_data","style","position","right","bottom","zIndex","e","bridge","send","then","replace","concat","key","value","Frame","props","left","top","mode","fill","curentLink","flex","src","onLoad","console","log","seamless","App","useState","activePanel","useEffect","count","offset","keys","View","ReactDOM","render","document","getElementById"],"mappings":"oOAoEeA,EAtDC,SAAC,GAA0D,IAAxDC,EAAuD,EAAvDA,GAAIC,EAAmD,EAAnDA,eAAgBC,EAAmC,EAAnCA,cAAeC,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,QAmB1D,OACE,eAAC,IAAD,CAAOJ,GAAIA,EAAX,UACE,cAAC,IAAD,yDACA,cAAC,IAAD,UACE,cAAC,IAAD,CAAUK,KAAK,IAAf,SACGF,EAAKG,KAAI,SAACC,GAAD,OACR,cAAC,IAAD,CAEEC,SAAWD,GAAQA,EAAKE,SAAYF,EACpCG,OAASH,GAAQA,EAAKI,MAASJ,EAC/BK,QAAUL,GAAQA,EAAKM,MAASN,EAChCO,MAAQP,GAAQA,EAAKQ,KAAQ,KAC7BC,SAhBEC,EAgBYV,EAhBE,WAC1BL,EAAc,oCAAsCe,EAAY,SAChEhB,EAAe,YASCM,GAAQA,EAAKI,MAASJ,GAX3B,IAACU,SAsBV,cAAC,IAAD,CACEC,MAAO,CAAEC,SAAU,QAASC,MAAO,GAAIC,OAAQ,GAAIC,OAAQ,GAC3DjB,KAAK,IACLW,QAvCK,SAACO,GACVC,IAAOC,KAAK,0BAA0BC,MAAK,YAAoB,IAAjBT,EAAgB,EAAhBA,UAC5C,GAAIA,EAAW,CAEb,IAAMjB,EAAKiB,EACRU,QAAQ,oCAAqC,IAC7CA,QAAQ,eAAgB,IAC3BzB,EAAce,GACdb,EAAQD,EAAKyB,OAAO5B,IACpBwB,IAAOC,KAAK,qBAAsB,CAAEI,IAAK7B,EAAI8B,MAAOb,IACpDhB,EAAe,cA0BjB,SAKE,cAAC,IAAD,U,kBCtBO8B,EA5BD,SAACC,GAAD,OACZ,eAAC,IAAD,CAAOhC,GAAIgC,EAAMhC,GAAjB,UACE,cAAC,IAAD,CACEkB,MAAO,CAAEC,SAAU,QAASc,KAAM,EAAGC,IAAK,EAAGZ,OAAQ,GACrDjB,KAAK,IACLW,QAAS,kBAAMgB,EAAM/B,eAAe,YACpCkC,KAAK,WAJP,SAME,cAAC,IAAD,CAAYC,KAAK,WAElBJ,EAAMK,YACL,wBACErC,GAAG,YACHkB,MAAO,CAAEoB,KAAM,GACfC,IAAKP,EAAMK,WACXG,OAAQ,SAACjB,GAAD,OAAOkB,QAAQC,OACvBC,UAAQ,QCqDDC,EAjEH,WACV,MAAsCC,mBAAS,WAA/C,mBAAOC,EAAP,KAAoB7C,EAApB,KACA,EAAoC4C,mBAAS,MAA7C,mBAAOR,EAAP,KAAmBnC,EAAnB,KACA,EAAwB2C,mBAAS,IAAjC,mBAAO1C,EAAP,KAAaC,EAAb,KAwCA,OAvBA2C,qBAAU,WACRvB,IACGC,KAAK,yBAA0B,CAAEuB,MAAO,GAAIC,OAAQ,IACpDvB,MAAK,gBAAGwB,EAAH,EAAGA,KAAH,OAAc9C,EAAQD,EAAKyB,OAAOsB,SACzC,IAoBD,cAAC,IAAD,UACE,cAAC,IAAD,UACE,eAACC,EAAA,EAAD,CAAML,YAAaA,EAAnB,UACE,cAAC,EAAD,CACE9C,GAAG,UACHC,eAAgBA,EAChBC,cAAeA,EACfC,KAAMA,EACNC,QAASA,IAEX,cAAC,EAAD,CACEJ,GAAG,QACHC,eAAgBA,EAChBoC,WAAYA,YC7DxBb,IAAOC,KAAK,gBAEZ2B,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.752ac061.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport {\n  Button,\n  CardGrid,\n  ContentCard,\n  Group,\n  Panel,\n  PanelHeader,\n} from \"@vkontakte/vkui\";\nimport { Icon28QrCodeOutline } from \"@vkontakte/icons\";\nimport bridge from \"@vkontakte/vk-bridge\";\n\nconst History = ({ id, setActivePanel, setCurentLink, data, setData }) => {\n  const go = (e) => {\n    bridge.send(\"VKWebAppOpenCodeReader\").then(({ code_data }) => {\n      if (code_data) {\n        //window.location = code_data;\n        const id = code_data\n          .replace(\"https://card.myqrcards.com/links/\", \"\")\n          .replace(/\\?v=[0-9]*/gm, \"\");\n        setCurentLink(code_data);\n        setData(data.concat(id));\n        bridge.send(\"VKWebAppStorageSet\", { key: id, value: code_data });\n        setActivePanel(\"frame\");\n      }\n    });\n  };\n  const open = (code_data) => () => {\n    setCurentLink(\"https://card.myqrcards.com/links/\" + code_data + \"/info\");\n    setActivePanel(\"frame\");\n  };\n  return (\n    <Panel id={id}>\n      <PanelHeader>История</PanelHeader>\n      <Group>\n        <CardGrid size=\"l\">\n          {data.map((item) => (\n            <ContentCard\n              key={(item && item.name) || item}\n              subtitle={(item && item.company) || item}\n              header={(item && item.name) || item}\n              caption={(item && item.work) || item}\n              image={(item && item.img) || null}\n              onClick={open(item)}\n            />\n          ))}\n        </CardGrid>\n      </Group>\n\n      <Button\n        style={{ position: \"fixed\", right: 10, bottom: 10, zIndex: 2 }}\n        size=\"m\"\n        onClick={go}\n      >\n        <Icon28QrCodeOutline />\n      </Button>\n    </Panel>\n  );\n};\n\nHistory.propTypes = {\n  id: PropTypes.string.isRequired,\n  setActivePanel: PropTypes.func.isRequired,\n  setCurentLink: PropTypes.func.isRequired,\n};\n\nexport default History;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./Persik.css\";\nimport { Button, Panel, PanelHeader, PanelHeaderBack } from \"@vkontakte/vkui\";\nimport { Icon24Back } from \"@vkontakte/icons\";\nconst Frame = (props) => (\n  <Panel id={props.id}>\n    <Button\n      style={{ position: \"fixed\", left: 5, top: 5, zIndex: 2 }}\n      size=\"s\"\n      onClick={() => props.setActivePanel(\"history\")}\n      mode=\"tertiary\"\n    >\n      <Icon24Back fill=\"#fff\" />\n    </Button>\n    {props.curentLink && (\n      <iframe\n        id=\"my_iframe\"\n        style={{ flex: 1 }}\n        src={props.curentLink}\n        onLoad={(e) => console.log()}\n        seamless\n      ></iframe>\n    )}\n  </Panel>\n);\n\nFrame.propTypes = {\n  id: PropTypes.string.isRequired,\n  setActivePanel: PropTypes.func.isRequired,\n  curentLink: PropTypes.string,\n};\n\nexport default Frame;\n","import React, { useState, useEffect } from \"react\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport View from \"@vkontakte/vkui/dist/components/View/View\";\nimport ScreenSpinner from \"@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner\";\nimport { AdaptivityProvider, AppRoot } from \"@vkontakte/vkui\";\nimport \"@vkontakte/vkui/dist/vkui.css\";\n\nimport History from \"./panels/History\";\nimport Frame from \"./panels/Frame\";\n\nconst App = () => {\n  const [activePanel, setActivePanel] = useState(\"history\");\n  const [curentLink, setCurentLink] = useState(null);\n  const [data, setData] = useState([]);\n  //   [\n  //   {\n  //     img: \"https://api.selcdn.ru/v1/SEL_83360/Public/EJu_IqFkI0iFJgddx-yLpw.jpeg\",\n  //     name: \"Тюкало Кирилл\",\n  //     work: \"Младший разработчик\",\n  //     company: \"ООО Смарт Сервис\",\n  //   },\n  //   {\n  //     img: \"https://st3.depositphotos.com/1007566/12802/v/950/depositphotos_128028148-stock-illustration-businessman-avatar-elegant-icon.jpg\",\n  //     name: \"Петров Петр\",\n  //     work: \"Младший разработчик\",\n  //     company: \"ООО Смарт Сервис\",\n  //   },\n  // ]\n  //);\n\n  useEffect(() => {\n    bridge\n      .send(\"VKWebAppStorageGetKeys\", { count: 20, offset: 0 })\n      .then(({ keys }) => setData(data.concat(keys)));\n  }, []);\n  //const [popout, setPopout] = useState(<ScreenSpinner size=\"large\" />);\n\n  // useEffect(() => {\n  //   bridge.subscribe(({ detail: { type, data } }) => {\n  //     if (type === \"VKWebAppUpdateConfig\") {\n  //       const schemeAttribute = document.createAttribute(\"scheme\");\n  //       schemeAttribute.value = data.scheme ? data.scheme : \"client_light\";\n  //       document.body.attributes.setNamedItem(schemeAttribute);\n  //     }\n  //   });\n  //   async function fetchData() {\n  //     const user = await bridge.send(\"VKWebAppGetUserInfo\");\n  //     setUser(user);\n  //     setPopout(null);\n  //   }\n  //   fetchData();\n  // }, []);\n\n  return (\n    <AdaptivityProvider>\n      <AppRoot>\n        <View activePanel={activePanel}>\n          <History\n            id=\"history\"\n            setActivePanel={setActivePanel}\n            setCurentLink={setCurentLink}\n            data={data}\n            setData={setData}\n          />\n          <Frame\n            id=\"frame\"\n            setActivePanel={setActivePanel}\n            curentLink={curentLink}\n          />\n        </View>\n      </AppRoot>\n    </AdaptivityProvider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}