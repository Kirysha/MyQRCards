{"version":3,"sources":["panels/History.js","panels/Frame.js","App.js","index.js"],"names":["History","id","setActivePanel","setCurentLink","useState","data","setData","useEffect","bridge","send","then","keys","concat","size","map","item","subtitle","header","onClick","code_data","style","position","right","bottom","zIndex","e","replace","key","value","Frame","props","left","top","mode","fill","curentLink","flex","src","onLoad","console","log","seamless","App","activePanel","View","ReactDOM","render","document","getElementById"],"mappings":"oOA0EeA,EA5DC,SAAC,GAA2C,IAAzCC,EAAwC,EAAxCA,GAAIC,EAAoC,EAApCA,eAAgBC,EAAoB,EAApBA,cACrC,EAAwBC,mBAAS,CAAC,aAAlC,mBAAOC,EAAP,KAAaC,EAAb,KAEAC,qBAAU,WACRC,IACGC,KAAK,0BACLC,MAAK,gBAAGC,EAAH,EAAGA,KAAH,OAAcL,EAAQD,EAAKO,OAAOD,UAqB5C,OACE,eAAC,IAAD,CAAOV,GAAIA,EAAX,UACE,cAAC,IAAD,yDACA,cAAC,IAAD,UACE,cAAC,IAAD,CAAUY,KAAK,IAAf,SACGR,EAAKS,KAAI,SAACC,GAAD,OACR,cAAC,IAAD,CAEEC,SAAU,KACVC,OAAQF,EACRG,SAdEC,EAcYJ,EAdE,WAC1BZ,EAAc,oCAAsCgB,EAAY,SAChEjB,EAAe,YASAa,GAXJ,IAACI,SAoBV,cAAC,IAAD,CACEC,MAAO,CAAEC,SAAU,QAASC,MAAO,GAAIC,OAAQ,GAAIC,OAAQ,GAC3DX,KAAK,IACLK,QArCK,SAACO,GACVjB,IAAOC,KAAK,0BAA0BC,MAAK,YAAoB,IAAjBS,EAAgB,EAAhBA,UAC5C,GAAIA,EAAW,CAEb,IAAMlB,EAAKkB,EACRO,QAAQ,oCAAqC,IAC7CA,QAAQ,QAAS,IACpBvB,EAAcgB,GACdb,EAAQD,EAAKO,OAAOX,IACpBO,IAAOC,KAAK,qBAAsB,CAAEkB,IAAK1B,EAAI2B,MAAOT,IACpDjB,EAAe,cAwBjB,SAKE,cAAC,IAAD,U,kBC5BO2B,EA5BD,SAACC,GAAD,OACZ,eAAC,IAAD,CAAO7B,GAAI6B,EAAM7B,GAAjB,UACE,cAAC,IAAD,CACEmB,MAAO,CAAEC,SAAU,QAASU,KAAM,EAAGC,IAAK,EAAGR,OAAQ,GACrDX,KAAK,IACLK,QAAS,kBAAMY,EAAM5B,eAAe,YACpC+B,KAAK,WAJP,SAME,cAAC,IAAD,CAAYC,KAAK,WAElBJ,EAAMK,YACL,wBACElC,GAAG,YACHmB,MAAO,CAAEgB,KAAM,GACfC,IAAKP,EAAMK,WACXG,OAAQ,SAACb,GAAD,OAAOc,QAAQC,OACvBC,UAAQ,QC6BDC,EAzCH,WACV,MAAsCtC,mBAAS,WAA/C,mBAAOuC,EAAP,KAAoBzC,EAApB,KACA,EAAoCE,mBAAS,MAA7C,mBAAO+B,EAAP,KAAmBhC,EAAnB,KAmBA,OACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,eAACyC,EAAA,EAAD,CAAMD,YAAaA,EAAnB,UACE,cAAC,EAAD,CACE1C,GAAG,UACHC,eAAgBA,EAChBC,cAAeA,IAEjB,cAAC,EAAD,CACEF,GAAG,QACHC,eAAgBA,EAChBiC,WAAYA,YCrCxB3B,IAAOC,KAAK,gBAEZoC,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.c36ec6c4.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport {\n  Button,\n  CardGrid,\n  ContentCard,\n  Group,\n  Panel,\n  PanelHeader,\n} from \"@vkontakte/vkui\";\nimport { Icon28QrCodeOutline } from \"@vkontakte/icons\";\nimport bridge from \"@vkontakte/vk-bridge\";\n\nconst History = ({ id, setActivePanel, setCurentLink }) => {\n  const [data, setData] = useState([\"testItem\"]);\n\n  useEffect(() => {\n    bridge\n      .send(\"VKWebAppStorageGetKeys\")\n      .then(({ keys }) => setData(data.concat(keys)));\n  });\n\n  const go = (e) => {\n    bridge.send(\"VKWebAppOpenCodeReader\").then(({ code_data }) => {\n      if (code_data) {\n        //window.location = code_data;\n        const id = code_data\n          .replace(\"https://card.myqrcards.com/links/\", \"\")\n          .replace(\"/info\", \"\");\n        setCurentLink(code_data);\n        setData(data.concat(id));\n        bridge.send(\"VKWebAppStorageSet\", { key: id, value: code_data });\n        setActivePanel(\"frame\");\n      }\n    });\n  };\n  const open = (code_data) => () => {\n    setCurentLink(\"https://card.myqrcards.com/links/\" + code_data + \"/info\");\n    setActivePanel(\"frame\");\n  };\n  return (\n    <Panel id={id}>\n      <PanelHeader>История</PanelHeader>\n      <Group>\n        <CardGrid size=\"l\">\n          {data.map((item) => (\n            <ContentCard\n              key={item}\n              subtitle={\"Id\"}\n              header={item}\n              onClick={open(item)}\n            />\n          ))}\n        </CardGrid>\n      </Group>\n\n      <Button\n        style={{ position: \"fixed\", right: 10, bottom: 10, zIndex: 2 }}\n        size=\"m\"\n        onClick={go}\n      >\n        <Icon28QrCodeOutline />\n      </Button>\n    </Panel>\n  );\n};\n\nHistory.propTypes = {\n  id: PropTypes.string.isRequired,\n  setActivePanel: PropTypes.func.isRequired,\n  setCurentLink: PropTypes.func.isRequired,\n};\n\nexport default History;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./Persik.css\";\nimport { Button, Panel, PanelHeader, PanelHeaderBack } from \"@vkontakte/vkui\";\nimport { Icon24Back } from \"@vkontakte/icons\";\nconst Frame = (props) => (\n  <Panel id={props.id}>\n    <Button\n      style={{ position: \"fixed\", left: 5, top: 5, zIndex: 2 }}\n      size=\"s\"\n      onClick={() => props.setActivePanel(\"history\")}\n      mode=\"tertiary\"\n    >\n      <Icon24Back fill=\"#fff\" />\n    </Button>\n    {props.curentLink && (\n      <iframe\n        id=\"my_iframe\"\n        style={{ flex: 1 }}\n        src={props.curentLink}\n        onLoad={(e) => console.log()}\n        seamless\n      ></iframe>\n    )}\n  </Panel>\n);\n\nFrame.propTypes = {\n  id: PropTypes.string.isRequired,\n  setActivePanel: PropTypes.func.isRequired,\n  curentLink: PropTypes.string,\n};\n\nexport default Frame;\n","import React, { useState, useEffect } from \"react\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport View from \"@vkontakte/vkui/dist/components/View/View\";\nimport ScreenSpinner from \"@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner\";\nimport { AdaptivityProvider, AppRoot } from \"@vkontakte/vkui\";\nimport \"@vkontakte/vkui/dist/vkui.css\";\n\nimport History from \"./panels/History\";\nimport Frame from \"./panels/Frame\";\n\nconst App = () => {\n  const [activePanel, setActivePanel] = useState(\"history\");\n  const [curentLink, setCurentLink] = useState(null);\n  //const [popout, setPopout] = useState(<ScreenSpinner size=\"large\" />);\n\n  // useEffect(() => {\n  //   bridge.subscribe(({ detail: { type, data } }) => {\n  //     if (type === \"VKWebAppUpdateConfig\") {\n  //       const schemeAttribute = document.createAttribute(\"scheme\");\n  //       schemeAttribute.value = data.scheme ? data.scheme : \"client_light\";\n  //       document.body.attributes.setNamedItem(schemeAttribute);\n  //     }\n  //   });\n  //   async function fetchData() {\n  //     const user = await bridge.send(\"VKWebAppGetUserInfo\");\n  //     setUser(user);\n  //     setPopout(null);\n  //   }\n  //   fetchData();\n  // }, []);\n\n  return (\n    <AdaptivityProvider>\n      <AppRoot>\n        <View activePanel={activePanel}>\n          <History\n            id=\"history\"\n            setActivePanel={setActivePanel}\n            setCurentLink={setCurentLink}\n          />\n          <Frame\n            id=\"frame\"\n            setActivePanel={setActivePanel}\n            curentLink={curentLink}\n          />\n        </View>\n      </AppRoot>\n    </AdaptivityProvider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}